const imdb = `tt0944947
tt0903747
tt0185906
tt0111161
tt0068646
tt1475582
tt0468569
tt0071562
tt2356777
tt0110912
tt0167260
tt0108052
tt0108778
tt0060196
tt0050083
tt4574334
tt2085059
tt1375666
tt0137523
tt0109830
tt0120737
tt1856010
tt0475784
tt0386676
tt0133093
tt0167261
tt0080684
tt0099685
tt0073486
tt0773262
tt0412142
tt0096697
tt3322312
tt0121955
tt0816692
tt0114369
tt0102926
tt0076759
tt0120815
tt0120689
tt0110413
tt0114814
tt0317248
tt0245429
tt0118799
tt0038650
tt2306299
tt0172495
tt0407887
tt0482571
tt0209144
tt0120586
tt0088763
tt0103064
tt0110357
tt0082971
tt0078748
tt1675434
tt0253474
tt4154756
tt2582802
tt0078788
tt0054215
tt0034583
tt0047396
tt0460681
tt1632701
tt1345836
tt1853728
tt0169547
tt0910970
tt0112573
tt0081505
tt0090605
tt0364569
tt0411008
tt0455275
tt0057012
tt0405094
tt1442437
tt1187043
tt0119698
tt0361748
tt0086190
tt0338013
tt0105236
tt0114709
tt1520211
tt0119217
tt0208092
tt0180093
tt0066921
tt0435761
tt0086250
tt0211915
tt0075314
tt0093058
tt0062622
tt0460649
tt0119488
tt0071853
tt0033467
tt0086879
tt0052357
tt0372784
tt0993846
tt0434409
tt1049413
tt0268978
tt0095016
tt0898266
tt0097576
tt0083658
tt0117951
tt0457430
tt2096673
tt0113277
tt0120735
tt0469494
tt0112641
tt1291584
tt0105695
tt5027774
tt3170832
tt0363163
tt0848228
tt1130884
tt2015381
tt0266697
tt0266543
tt0167404
tt0120382
tt0107290
tt1392190
tt0477348
tt2267998
tt0198781
tt0264464
tt0246578
tt1201607
tt1205489
tt0118715
tt2278388
tt0892769
tt0405159
tt2024544
tt0116282
tt3315342
tt0758758
tt1392214
tt0075148
tt1454029
tt1979320
tt0097165
tt2119532
tt1895587
tt0093779
tt0091763
tt0079470
tt0092005
tt0084787
tt1727824
tt0395169
tt0325980
tt1431045
tt2488496
tt1010048
tt0088247
tt0401792
tt3659388
tt0947798
tt2084970
tt1877832
tt1663202
tt0378194
tt0317705
tt1504320
tt0440963
tt0382932
tt0796366
tt0107048
tt0114746
tt0381061
tt0073195
tt1798709
tt0450259
tt0095953
tt3783958
tt1659337
tt0454921
tt0790636
tt0319061
tt0327056
tt0101414
tt2948356
tt1856101
tt0032138
tt0070047
tt0103639
tt0166924
tt0371746
tt0903624
tt1136608
tt0126029
tt1631867
tt0454876
tt2543164
tt0304141
tt0258463
tt0332280
tt0365748
tt0120363
tt5013056
tt3501632
tt0206634
tt0425112
tt0099487
tt2872718
tt0780536
tt0083866
tt0088847
tt1065073
tt1182345
tt0499549
tt0120338
tt1843866
tt1074638
tt3498820
tt1170358
tt0936501
tt0421715
tt0780504
tt0240772
tt3748528
tt0162222
tt3460252
tt0096874
tt0449059
tt0372183
tt0375679
tt1568346
tt1535109
tt0335266
tt5463162
tt2245084
tt0765429
tt0398286
tt0093773
tt0087332
tt0964517
tt0119174
tt1596363
tt1490017
tt1748122
tt0425210
tt0120601
tt0091042
tt1454468
tt0416449
tt1119646
tt1045658
tt1270798
tt1285016
tt2802144
tt1024648
tt2562232
tt0330373
tt1323594
tt3896198
tt1408101
tt1022603
tt0926084
tt0470752
tt0289879
tt0119116
tt0443706
tt5052448
tt2193021
tt0325710
tt2980516
tt0139654
tt1605783
tt1772341
tt0265086
tt0361862
tt2582846
tt0328107
tt1306980
tt0388795
tt0121766
tt0241527
tt0988045
tt1250777
tt0829482
tt1318514
tt0181689
tt1156398
tt0409459
tt0144084
tt0417741
tt0087469
tt0887912
tt2103281
tt0314331
tt2713180
tt0441773
tt3890160
tt0387564
tt0289043
tt0112864
tt0443543
tt3397884
tt1210166
tt0099674
tt1542344
tt0840361
tt0454848
tt0230600
tt6644200
tt1951264
tt2294629
tt1211837
tt0290334
tt0451279
tt0467406
tt0945513
tt0373889
tt2250912
tt0099785
tt0268380
tt1457767
tt1515091
tt0217505
tt0446029
tt0369339
tt0096895
tt0338751
tt0118971
tt0238380
tt1677720
tt0120903
tt1276104
tt1219289
tt0295297
tt2310332
tt1570728
tt1229238
tt0099088
tt1396484
tt1690953
tt1371111
tt0408236
tt2381249
tt0162661
tt1193138
tt0117500
tt2395427
tt0145487
tt0383574
tt1670345
tt0316654
tt1825683
tt0478970
tt0119654
tt1343092
tt2911666
tt2179136
tt0362227
tt3183660
tt4972582
tt0217869
tt0443453
tt1596343
tt0109686
tt0119094
tt1907668
tt5580390
tt0462538
tt1453405
tt1392170
tt1300854
tt0480249
tt0234215
tt1232829
tt2527336
tt0332452
tt1800241
tt0298148
tt0360717
tt2820852
tt0357413
tt0111257
tt0455944
tt0822854
tt0770828
tt0418279
tt0449088
tt0343818
tt0337978
tt0405422
tt0117060
tt1905041
tt1217209
tt1282140
tt0317219
tt0099423
tt0298130
tt0800369
tt1228705
tt0816711
tt1446714
tt0369610
tt1981115
tt0948470
tt0116629
tt1483013
tt1723121
tt0120616
tt0163651
tt0942385
tt1060277
tt3385516
tt1259521
tt0478311
tt0317740
tt1650062
tt2294449
tt0396269
tt1355644
tt1587310
tt0377092
tt0212338
tt0910936
tt0458339
tt1637725
tt1663662
tt1499658
tt0363771
tt0458352
tt0351283
tt0110475
tt0317919
tt0496806
tt0399201
tt1790864
tt2379713
tt0232500
tt1068680
tt1409024
tt0343660
tt1104001
tt0376994
tt0242653
tt1840309
tt1430132
tt0800080
tt1951265
tt0120591
tt1637688
tt0315327
tt0493464
tt0286106
tt0121765
tt1298650
tt0458525
tt1535108
tt0367594
tt1872181
tt0830515
tt0382625
tt1245492
tt0438488
tt1632708
tt0120915
tt2975590
tt1411697
tt0356910
tt0407304
tt1014759
tt0119567
tt0349903
tt0974015
tt1320253
tt1231583
tt0448157
tt2872732
tt0319262
tt0831387
tt1399103
tt0181852
tt0413300
tt0367882
tt1386697
tt0120912
tt0213149
tt0120755
tt1055369
tt1190080
tt0120667
tt1099212`

const imdbID = imdb.split(/\n/ig)
const slicedArr = imdbID.slice(320,327)

const Movie = require('../database/models/Movie')
const https = require('https')

let getMovies = () => {
    
    slicedArr.map( (item) => {
        https.get(`https://api.themoviedb.org/3/find/${item}?api_key=8a7e752cebf6ca5ac0da696ca29c36fa&language=en-US&external_source=imdb_id`, (resp) => {
        let data = '';
        
        resp.on('data', (chunk) => {
          data += chunk;
        });
      
        resp.on('end', async () => {
            let resData = JSON.parse(data)
            if(resData.movie_results && resData.movie_results.length > 0){
                await Movie.create({
                    mdb_id: resData.movie_results[0].id,
                    movie_title: resData.movie_results[0].title
                })  
            }
           else{
                console.log(resData);
            }
        });
        
      }).on("error", (err) => {
        console.log("Error: " + err.message);
      })
    })
   
}
module.exports = getMovies